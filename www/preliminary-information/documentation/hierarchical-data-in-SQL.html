<!DOCTYPE html><html><head><link rel="stylesheet" href="/imagestalk/style.css"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><meta content="width=device-width, initial-scale=1.0" name="viewport"><title>Arab Image Foundation</title><script src="https://code.jquery.com/jquery-2.1.3.min.js"></script><script src="/imagestalk/main.js"></script></head><body class="preliminary-information documentation hierarchical-data-in-SQL production"><div id="Wrapper"><div id="Content"><input id="DrawerToggle" type="checkbox" name="drawer-toggle"/><div class="sidebar"><label for="DrawerToggle" id="drawer-toggle-label"><i class="fa fa-bars"></i></label><ul><li><a href="/imagestalk" class="home"><i class="fa fa-home"></i>Home</a></li><li class="open"><a href="/imagestalk/preliminary-information/">Preliminary Information</a><ul class="open"><li><a href="/imagestalk/preliminary-information/agreement">Agreement</a></li><li><a href="/imagestalk/preliminary-information/documentation">Documentation</a><ul><li><a href="/imagestalk/preliminary-information/documentation/hierarchical-data-in-SQL" class="active">Hierarchical Data In SQL</a></li><li><a href="/imagestalk/preliminary-information/documentation/other-references-of-interest">Other References Of Interest</a></li><li><a href="/imagestalk/preliminary-information/documentation/vocabulary-and-quick-definitions">Vocabulary &amp; Quick Definitions</a><ul><li><a href="/imagestalk/preliminary-information/documentation/vocabulary-and-quick-definitions/databases">Databases</a></li><li><a href="/imagestalk/preliminary-information/documentation/vocabulary-and-quick-definitions/hosting-platforms">Hosting Platforms</a></li><li><a href="/imagestalk/preliminary-information/documentation/vocabulary-and-quick-definitions/server-side-technologies">Server Side Technologies</a></li></ul></li></ul></li><li><a href="/imagestalk/preliminary-information/planning">Planning</a><ul><li><a href="/imagestalk/preliminary-information/planning/tentative-specification-sheet">Tentative Specification Sheet</a></li><li><a href="/imagestalk/preliminary-information/planning/tentative-team-structure">Tentative Team Structure</a></li><li><a href="/imagestalk/preliminary-information/planning/timeline">Timeline</a></li><li><a href="/imagestalk/preliminary-information/planning/tasks">Tasks</a></ul></li></ul></li></ul></div><div class="content"><h1><a href="/preliminary-information/documentation/hierarchical-data-in-SQL">Hierarchical Data In SQL</a></h1><p>Two main models allow to describe hierarchical data in SQL: </p>
<ul>
<li><em>Adjacency Lists</em>: Each node keeps a reference to it&#39;s parent, or, more uncommonly, each parent keeps a list of children (or both, but data is then de-normalized and should be maintained at the application level).</li>
<li><em>Nested Sets</em>: each node sets &quot;left&quot; and &quot;right&quot; value to nodes to describe its &quot;spatial limits&quot; (using the term very liberally here). Thus a node that has &quot;left:1&quot; and &quot;right:20&quot; contains a node that has &quot;left:2&quot; and &quot;right:4&quot;.</li>
</ul>
<p>Adjacency lists are more pleasing because more easily readable for a human, however it can become quickly cumbersome if the tree is deep (many requests become necessary to retrieve the tree in full). Special care must be taken at the application level because deleting a root node will not necessarily delete the children, which can lead to orphan nodes and bad references.  </p>
<h3>references</h3><ul>
<li><a href="http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/">the seminal &quot;Modeling Hierarchical Data in SQL&quot; by Mike Hillier</a></li>
<li><a href="http://explainextended.com/2009/09/25/adjacency-list-vs-nested-sets-sql-server/">Adjacency Lists vs Nested Sets</a> </li>
</ul>
<hr>
<p>However, in the case of FAI, we probably cannot rely on pure tree structures. It is very likely that relationships can go in multiple ways, and so we probably need a way to model Directed Graphs or Directed Acyclic Graphs (DG and DAG). DG are cumbersome to use, because relationships (&quot;edges&quot;, in graph theory parlance) can &quot;cycle&quot;, and so special care must be taken to not fall into loops. DAG are safe from loops, which means algorithms can be simplified, but care must be taken to not create a loop (since the algorithm wouldn&#39;t cater for it and might run indefinitely). Here are some papers:</p>
<ul>
<li><a href="http://hansolav.net/sql/graphs.html">Graphs and Graph Algorithms in T-SQL</a></li>
<li><a href="http://www.codeproject.com/KB/database/Modeling_DAGs_on_SQL_DBs.aspx?msg=3051183">A Model to Represent Directed Acyclic Graphs (DAG) on SQL Databases</a></li>
<li><a href="http://techportal.inviqa.com/2009/09/07/graphs-in-the-database-sql-meets-social-networks/">Graphs in the database: SQL meets social networks</a></li>
</ul>
<p>Since manipulating DGs and DAGs by hand would be complex, I&#39;ve been looking for an ORM to help alleviate the problem. An ORM does &quot;Object Relational Mapping&quot;; basically, abstracts complexity and facilitates communication with the database. Unsurprisingly, very few have tree representation, and none has graph representations.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Technology</th>
<th>Nested Sets</th>
<th>AG</th>
<th>DAG</th>
<th>EAV</th>
<th>Pure ORM  </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <a href="http://propelorm.org/">Propel</a></td>
<td>PHP</td>
<td><a href="http://propelorm.org/documentation/behaviors/nested-set.html"><i class="fa fa-check"></i></a></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-check"></i>       </td>
</tr>
<tr>
<td>  <a href="http://datamapper.wanwizard.eu/">DataMapper</a></td>
<td>PHP</td>
<td><a href="http://datamapper.wanwizard.eu/pages/extensions/nestedsets.html"><i class="fa fa-check"></i></a></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-check"></i>      </td>
</tr>
<tr>
<td>  <a href="http://doctrine.readthedocs.org">Doctrine</a></td>
<td>PHP</td>
<td><a href="http://doctrine.readthedocs.org/en/latest/en/manual/hierarchical-data.html"><i class="fa fa-check"></i></a></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-check"></i>    </td>
</tr>
<tr>
<td>  <a href="http://www.yiiframework.com/">Yii2</a></td>
<td>PHP</td>
<td><a href="http://www.yiiframework.com/extensions/?tag=nested+set">plugin</a></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
</tr>
<tr>
<td>  <a href="http://fuelphp.com">FuelPHP</a></td>
<td>PHP</td>
<td><a href="http://fuelphp.com/docs/packages/orm/model/nestedset.html"><i class="fa fa-check"></i></a></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><a href="http://fuelphp.com/docs/packages/orm/eav.html"><i class="fa fa-check"></i></a></td>
<td>no        </td>
</tr>
<tr>
<td>  <a href="http://laravel.com/">Laravel</a></td>
<td>PHP</td>
<td><a href="http://etrepat.com/baum/">plugin</a></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
<td><i class="fa fa-times"></i></td>
</tr>
</tbody>
</table></div></div><div id="Footer"><p>&copy; Arab Image Foundation</p></div></div></body></html>