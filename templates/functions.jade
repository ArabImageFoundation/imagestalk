- var fontIcons = {'+':'plus-circle','-':'minus-circle','#':'check','x':'times','âœ“':'check'}
- var formatName = function(name){return name.replace(/\.html$/,'').replace(/^\/|\/$/g,'').split(/-|\//g).map(function(w){return w.charAt(0).toUpperCase()+w.slice(1);}).join(' ').replace(/\sAnd\s/g,' & ');}
- var formatTitle = function(current){return formatName(current.path[current.path.length-1]=='index' ? current.path[current.path.length-2] : current.path[current.path.length-1]);}
- var isCurrent = function(path,currentPath){return (path==currentPath.replace(/\/index$/,'')) ? 'active' : '';}
- var findKey = function(root,tail,head){head = root; while(head && tail.length){if(head[tail[0]]){head=head[tail.shift()]}};return head;}
- var setSymbols = function(text){return text.replace(/\((.)\)/g,function(a,s){var t=fontIcons[s] || 'default';return '<i class="fa fa-'+t+'"></i>'});}
- var asset = function(_asset){var path = current.path.join('/').replace(/^\/|\/$/g,'').replace(/\/?index$/,'').split('/').map(function(n){return n?'..':''}).join('/'); return ((path?path+'/':'') +_asset);}
- var isDev = !(env == "production" || environment == "production")
- var rootPath = (!isDev) ? '/imagestalk':''
- var extend = function(destination, source) {for (var property in source) {if (source[property] && source[property].constructor && source[property].constructor === Object) {destination[property] = destination[property] || {};extend(destination[property], source[property]);}else{destination[property] = source[property];}}return destination;};
- var unescape = function(safe){return safe.replace(/&amp;/g, "&").replace(/&lt;/g, "<").replace(/&gt;/g,">").replace(/&quot;/g, "\"").replace(/&#0?39;/g, "'");}

mixin body()
	- var body = yield;
	- body = setSymbols(body).split(/\n|\r/g)
	each line in body
		!=line.replace(/\[\[(\w*?)\((.*?)\)\]\]/g,function(a,f,args){args=unescape(args);eval(f+'_mixin('+args+');');return '';})